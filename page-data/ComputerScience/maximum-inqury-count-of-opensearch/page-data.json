{"componentChunkName":"component---node-modules-gatsby-theme-portfolio-minimal-src-templates-article-index-tsx","path":"/ComputerScience/maximum-inqury-count-of-opensearch/","result":{"pageContext":{"article":{"banner":{"alt":"","caption":"","src":null},"body":"<blockquote>\n<h2>💡  <strong>Situation</strong></h2>\n</blockquote>\n<ul>\n<li>\n<p>APM 제품의 application 로그를 시계열 데이터로 적재하고있다.</p>\n</li>\n<li>\n<p>게시판 형태의 페이지에서, 페이지네이션이 가능한 검색이 필요하다.</p>\n</li>\n<li>\n<p>1만건이 넘을 때 페이지를 불러올 수 없다.</p>\n</li>\n</ul>\n<blockquote>\n<h2>📋 <strong>Task</strong></h2>\n</blockquote>\n<ul>\n<li>OpenSearch의 공식 문서를 읽고 제약사항과 대안을 확인한다.</li>\n<li>부족하면 구글링하여 다른 use case를 파악한다.</li>\n<li>위 두가지 내용을 gpt 통해 좋은 방법을 확인 후 채택한다.</li>\n<li>테스트 코드 작성하여, 의도한 대로 되는지 시도해본다.</li>\n</ul>\n<blockquote>\n<h2>👨‍💻 <strong>Action</strong></h2>\n</blockquote>\n<ul>\n<li>\n<p>OpenSearch 문서 확인 <br>\r\n<img src=\"https://prod-files-secure.s3.us-west-2.amazonaws.com/4af44c55-bb9f-4a14-af4e-55648b227811/0ec673ec-4b57-492b-9d17-2eb3865a87a3/image.png\" alt=\"image.png\"></p>\n</li>\n<li>\n<p>지인찬스 → N 사는 6천건으로 설정</p>\n</li>\n<li>\n<p>기본 1만건이지만, 설정으로 바꿀 수 있는 점 확인</p>\n<ul>\n<li>document 사이즈나 검색 빈도를 고려해서</li>\n<li>건수를 늘릴 수록 메모리 사용량이 많아져, 검색에 지장 갈 수 있으니 크게 잡지 않는게 좋은 점 확인</li>\n</ul>\n</li>\n<li>\n<p>OpenSearch의 근본인 Elastic Search도 찾아보아도 동일<br>\r\n<img src=\"https://prod-files-secure.s3.us-west-2.amazonaws.com/4af44c55-bb9f-4a14-af4e-55648b227811/b47031db-3fa4-4f1d-9a72-ed2a4cc0c952/image.png\" alt=\"image.png\"></p>\n</li>\n<li>\n<p>대안은 scroll 과 search_after를 사용하면 가능한점 확인</p>\n<ul>\n<li>원리는 마지막 데이터의 고유 아이디와 인덱스 정보를 가지고, 마지막을 찾아가 그 위치(offset)부터 페이지 사이즈만큼 조회하도록 함.<br>\r\n<img src=\"https://prod-files-secure.s3.us-west-2.amazonaws.com/4af44c55-bb9f-4a14-af4e-55648b227811/05da9c9c-4705-4287-b082-43885ac9733a/image.png\" alt=\"image.png\"></li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<h2>🗽 <strong>Result</strong></h2>\n</blockquote>\n<ul>\n<li>scroll 사용해서 페이지네이션 하도록 변경</li>\n<li>프론트개발 리드 분께서 이해 못하셔서 설명해드렸지만, 20년동안 처음 본다하셔서 RDB와 다른 점과 공식 문서, gpt 검색결과 토대로 ppt 만들어 pr하여 납득시켜드리는 좋은 경험도 함.</li>\n</ul>","categories":["Computer Science"],"date":"October 11, 2024","description":"","id":"633bf2d8-c642-501c-8a38-17e896afd749","keywords":["OpenSearch","Elastic Search","inqury","pagination"],"slug":"/ComputerScience/maximum-inqury-count-of-opensearch/","title":"OpenSearch 최대 조회 건수 ","readingTime":{"text":"3 min read"}},"listingPagePath":"/blog"}},"staticQueryHashes":["1572444355","1764120992","2636236428","2709378673","3262260831","3584947626","4042740421","540466502","597217301","948380417"],"slicesMap":{}}