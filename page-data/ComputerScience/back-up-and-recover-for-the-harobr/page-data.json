{"componentChunkName":"component---node-modules-gatsby-theme-portfolio-minimal-src-templates-article-index-tsx","path":"/ComputerScience/back-up-and-recover-for-the-harobr/","result":{"pageContext":{"article":{"banner":{"alt":"","caption":"","src":null},"body":"<h2>Overview</h2>\n<ul>\n<li>회사에서 운영하는 배포 파이프 라인이 있었지만,\n접근할 수 있는 권한이 많지 않고, 회사에서 사용하는 구성을 개인적으로 학습하고자 동일하게 구성해둔 파이프 라인이 있는데 그곳을 다른 환경으로 이사 시키기 위해 작성해보았다.</li>\n<li>설치도 간단했지만, 백업도 간단하다</li>\n</ul>\n<h2>절차</h2>\n<p>harbor 서비스 종류 → 백업 → 새로운 서버에 harbor 설치 → 새로운 harbor 서비스 종료 → 백업한 자료로 /data 디렉토리 덮어쓰기</p>\n<h2>백업</h2>\n<ul>\n<li>참고할 디렉토리 위치 및 설정파일\n<ul>\n<li>데이터 관련 디렉토리: /data</li>\n<li>환경설정 관련 디렉토리: /opt/harbor 또는 /usr/local/harbor\n<ul>\n<li>harbor.yml\n<ul>\n<li>hostname</li>\n<li>http.port</li>\n<li>harbor_admin_password: Harbor12345</li>\n<li>database.password: root123</li>\n<li>data_volume: /data</li>\n<li>upload_purging.enabled: true</li>\n<li>upload_purging.age: 168h</li>\n<li>upload_purging.interval: 24h</li>\n<li>cache.enabled: false   #이건 서버성능에 따라</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2>정상확인</h2>\n<h3>서비스 확인</h3>\n<p><code class=\"language-text\">docker compose watch</code></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 334px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.15151515151515%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfklEQVR42mWT6XLCMAyEeYQ62KYcHcoRcpLDBKbv/2LqSnISMvzQOCPIp92Vs3JpS+50J3/vydeoeyCXt3qib9cZWV+gcq1N8Vn8+7c+r+wRLwHq+wf5FtUP5DucFeBtIF905M6Nnsd6huJMfhtK0o6SC1cr0NV6WymQIU2Qclkr5cMgg+T570Xup3pTlQvkq3yQufVkqoHstgRwX5G7MjCITQGOqgB0ZQ9QrbDR/gg8A1gEMlBpsgCFDDzAxjWqYZWsCHbdDb0BvRp/PFQywKUNWbEdgScAoczkQZROCgU4WkZuruwUyEPamGepQ2RRfrZsimh5Au6qt6VEoFi+0+b1VGAdN44XrMt1o6NlzjDrlwqnDPnacIY5gBdkODwVhgHSR8+6eE3cnCFvmm0r8CPDQTMEVDIM6N3GBXVkd6VkyovhDE3MUCzLUvb18h4C6mJeU4bXZh7GatkJesmpERBbNsulNJqf3MOHWpYtwzLOxRcxfjFsmYG8lHQG/gO7rjQi5bOeQwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/cabc05871000891947406497614a4a39/c9b55/harbor_1.webp 165w,\n/static/cabc05871000891947406497614a4a39/f2908/harbor_1.webp 330w,\n/static/cabc05871000891947406497614a4a39/7390e/harbor_1.webp 334w\"\n              sizes=\"(max-width: 334px) 100vw, 334px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/cabc05871000891947406497614a4a39/04c57/harbor_1.png 165w,\n/static/cabc05871000891947406497614a4a39/d9ecf/harbor_1.png 330w,\n/static/cabc05871000891947406497614a4a39/86d36/harbor_1.png 334w\"\n            sizes=\"(max-width: 334px) 100vw, 334px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/cabc05871000891947406497614a4a39/86d36/harbor_1.png\"\n            alt=\"image.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h3>DB 연결 확인</h3>\n<ul>\n<li>속성정보\n<ul>\n<li>Database: registry</li>\n<li>User: postgres</li>\n<li>Password: harbor.yml 참조</li>\n</ul>\n</li>\n<li>설계를 살짝 추측 해볼 수 있는 구성이다</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 522px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 187.27272727272728%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAYAAABCr8kFAAAACXBIWXMAAAsTAAALEwEAmpwYAAADLElEQVR42o1Wy3LTQBD0R4QCblxISGLJkvy2Zb2ftmyHSqowxYUqiiN3/gAKOHCGj222VxFxYmmlw1Ti1aq3p6dnVj39+hK5N8D7twHiNEcWBxibGobGtYg+LP0K1uCq/Hv/v6ldNsQVes+S73iR/cCr299Yf/mLxac/eJ7/xJlYZzzrFN9wlv7CS/8reufTHc6ne7jxDreHj7B3n2H47/B6ssXFjM+6xh4X4wy9kuobGHofgTPBh50Lx57D6Is1rYzmFB/CGlyLvZfoDQYDMDRdx3xkwElyJHkB217CGg4xFFHtaQrDMDCbzRCG4QOgfGBaMLwCab6G73mYz+dyowpMF0TG4zGSJEEcx48BLcuC5W1KQN/DarXCYrGQ63xRBVgUBfI8PwU0fQJuEAn6WZZhuVzCNE0lw9FohLu7O9zc3NQACoZJliOOIpkC06ZGbYCO4zSkHBQCcI2VbcuCaJqm1JDPqfPhcKhPmYBhkkpAW4SK3THD7XaLzWZTD8gWTJL4f8pdAD3hClb6FNAvZFGCwJcVZkpNFT4G5OENgBvEoihhGEijcjPXVYDUmgzTNH0MaFqmZBjGKaIolAxpm+l0qmTJA1nlWobDYCs0zKQPuYnmVoFV77GA9G29bUSnJNREpBAEgdLYx4AnKVcaRoIhjc2UmW7bgFCkbGLol7aJ4wiRYOm6rmSp6ucWDctOIUNWmZvIUtUxfI9aK33oCWYE6topvu83FIXDQRSFxqZZqWOXeUhZGotCQKnh/cRpm4csGrWuBeT4Yqe4QmT+bps2FSBTbgRkURxnJb3Vdp9UKTObRsBsvZGtV90pLExb67HKCoa5bD3ahpuqFmQ1nwIfjy8lIOchU55MJpJhk32OAWttUwEuRLrUhtF1ONTbRgD6YSxOHbbOwqca1htb+DCMk3LaiFaqiqICpG2axxenTZLJic1icKPq6+G49eov+nsfkiHBmIpKx2NjNzAsJEPXdeSAZUt1GbANrVfOQ2qoi5br9/utt1510e/3+9PxZchvm/JOCUQKvKCkDB2+bdh6j1LWdAPLyQArz4ftCNeL02jWLrceD2SbUvN/ecG41fJOWkYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/26069c75eb808973ec1ae21c41dbb209/c9b55/harbor_2.webp 165w,\n/static/26069c75eb808973ec1ae21c41dbb209/f2908/harbor_2.webp 330w,\n/static/26069c75eb808973ec1ae21c41dbb209/25feb/harbor_2.webp 522w\"\n              sizes=\"(max-width: 522px) 100vw, 522px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/26069c75eb808973ec1ae21c41dbb209/04c57/harbor_2.png 165w,\n/static/26069c75eb808973ec1ae21c41dbb209/d9ecf/harbor_2.png 330w,\n/static/26069c75eb808973ec1ae21c41dbb209/29492/harbor_2.png 522w\"\n            sizes=\"(max-width: 522px) 100vw, 522px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/26069c75eb808973ec1ae21c41dbb209/29492/harbor_2.png\"\n            alt=\"image.png\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<h2>회고</h2>\n<ul>\n<li>검색한 결과나 chatGPT도 크게 다르지 않았어서 어렵지 않았다.</li>\n<li>설치할 때는 관심이 안 갔지만, 관리하려고 보니 DB구성을 보게 되고 설정과 구성을 보아 설계를 가늠할 수 있어서 또 다른 재미도 있었다.</li>\n</ul>","categories":["Computer Science"],"date":"October 04, 2024","description":"","id":"cf10fc74-c99c-5c77-a88b-ec8d4a9b201d","keywords":["Harbor","back up","recover"],"slug":"/ComputerScience/back-up-and-recover-for-the-harobr/","title":"Harbor 백업 및 복원 작업","readingTime":{"text":"2 min read"}},"listingPagePath":"/blog"}},"staticQueryHashes":["3262260831","948380417"],"slicesMap":{}}